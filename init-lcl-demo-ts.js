const fs = require("fs");
const process = require("process");

fs.mkdirSync("demo");

process.chdir("demo");

fs.writeFileSync(
  "webpack.config.js",
  `const path = require('path');
  module.exports = {
    mode: 'development',
    entry: path.join(__dirname, 'js', 'main.js'),
    output: {
      path: path.resolve(__dirname, 'demo-app'),
      filename: "bundle.js"
    }
  };`
);

fs.writeFileSync(
  "build.js",
  `// Build file generated by Sourc. Do not touch.
const child_process = require("child_process");
child_process.exec(
  "npx tsc -p demo/tsconfig.json && npx webpack --config demo/webpack.config.js"
);`
);

fs.writeFileSync(
  "tsconfig.json",
  `{
  "compilerOptions": {
      "target": "ES5",
      "lib": [
          "DOM",
          "ES2020"
      ],
      "module": "CommonJS",
      "outDir": "js"
  }
}`
);

fs.mkdirSync("ts");
fs.mkdirSync("js");
fs.writeFileSync("ts/main.ts", "");
fs.mkdirSync("demo-app");

process.chdir("demo-app");
fs.writeFileSync(
  "index.html",
  `<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="bundle.js" defer></script>
    <link rel="stylesheet" href="styles.css" />
    <title>Sandbox</title>
  </head>

  <body>
    <!-- Demo goes here! -->
  </body>
</html>
`
);

fs.writeFileSync("styles.css", "");
